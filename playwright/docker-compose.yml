version: "3.8"

services:
  playwright:
    build:
      context: ../playwright # In relation to root level docker-compose.yml file
      dockerfile: Dockerfile
    environment:
      - PLAYWRIGHT_BASEURL=https://server:5000
      - CI=true
    depends_on:
      - server
    volumes:
      - ../playwright/test-results:/playwright/test-results # In relation to root level docker-compose.yml file
    entrypoint: /bin/sh -c "/usr/local/bin/waitforit -address=server:5000 -timeout=60 && npx playwright test"
